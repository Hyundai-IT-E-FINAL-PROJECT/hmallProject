<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.team2.mapper.UserMapper">
    <insert id="insertSignup" >
        <selectKey keyProperty="no" order="BEFORE" resultType="int">
            SELECT seq_user.nextval from dual
        </selectKey>
        INSERT INTO TBL_USER (
            USER_SEQ,
            USER_ID,
            USER_PW,
            USER_NAME,
            USER_PHONE,
            CREATED_AT,
            UPDATED_AT,
            USER_EMAIL,
            USER_BIRTH,
            USER_GENDER,
            USER_EMAIL_RECEIVE,
            USER_SMS_RECEIVE,
            USER_PURCHASE_AMOUNT,
            USER_LEVEL,
            ENABLED
        ) VALUES (
                     #{no},
                     #{user_id},
                     #{user_pw},
                     #{user_name},
                     #{user_phone},
                     sysdate,
                     sysdate,
                     #{user_email},
                     #{user_birth},
                     #{user_gender},
                     #{user_email_receive},
                     #{user_sms_receive},
                     0,
                     0,
                     1)
    </insert>

    <insert id="insertAuth">
        INSERT INTO TBL_USER_AUTH
        VALUES
            (
             SEQ_USER_AUTH.NEXTVAL,
             #{userNum},
             'ROLE_USER',
             sysdate,
             sysdate
            )
    </insert>
</mapper>